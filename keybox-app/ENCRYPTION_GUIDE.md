# KeyBox 加密功能使用指南

KeyBox 现在支持加密导出功能，让您可以安全地在多设备间同步密码数据。

## 🔐 加密功能特性

- **AES-GCM 256位加密**: 使用业界标准的加密算法
- **PBKDF2 密钥派生**: 10万次迭代，防止暴力破解
- **文件完整性验证**: 确保文件未被篡改
- **安全的随机数生成**: 每次加密使用不同的盐值和初始化向量

## 📤 导出加密文件

1. 点击右上角菜单 → "导入/导出"
2. 切换到"导出数据"标签页
3. 点击"导出加密数据"按钮
4. 在弹出的对话框中设置加密密码
5. 点击"加密导出"，文件将以 `.kbx` 格式保存

### 密码建议
- 长度至少8位，建议12位以上
- 包含大小写字母、数字和特殊字符
- 避免使用常见密码或个人信息
- 请妥善保管密码，丢失后无法恢复数据

## 📥 导入加密文件

1. 点击右上角菜单 → "导入/导出"
2. 在"导入数据"标签页中选择或拖拽 `.kbx` 文件
3. 系统会自动识别加密文件并要求输入密码
4. 输入正确的解密密码
5. 点击"解密导入"完成数据导入

## 🔒 安全特性

### 加密算法
- **对称加密**: AES-GCM 256位
- **密钥派生**: PBKDF2-SHA256，100,000次迭代
- **认证加密**: GCM模式提供加密和认证

### 文件格式
加密文件包含以下结构：
```json
{
  "metadata": {
    "version": "1.0.0",
    "algorithm": "AES-GCM",
    "keyDerivation": "PBKDF2",
    "iterations": 100000,
    "createdAt": "2024-01-30T12:00:00.000Z",
    "application": "KeyBox Password Manager"
  },
  "data": "base64编码的加密数据",
  "hash": "原始数据的SHA-256哈希值"
}
```

### 安全保证
1. **密码不存储**: 密码仅用于加密/解密，不会保存在任何地方
2. **随机性**: 每次加密使用不同的盐值和IV
3. **完整性**: 通过哈希值验证文件完整性
4. **前向安全**: 即使密码泄露，历史文件仍然安全

## 🌐 浏览器兼容性

加密功能需要浏览器支持 Web Crypto API：
- ✅ Chrome 37+
- ✅ Firefox 34+
- ✅ Safari 7+
- ✅ Edge 12+

如果浏览器不支持，系统会显示相应提示。

## 📱 多设备同步建议

1. **统一密码**: 在所有设备上使用相同的加密密码
2. **定期备份**: 定期导出加密文件作为备份
3. **安全传输**: 通过安全渠道（如加密邮件、云存储）传输文件
4. **版本管理**: 建议在文件名中包含日期，如 `keybox-export-2024-01-30.kbx`

## ⚠️ 重要提醒

- **密码丢失无法恢复**: 请务必记住加密密码，丢失后数据无法恢复
- **定期更新密码**: 建议定期更换加密密码
- **安全存储**: 不要将密码和加密文件存储在同一位置
- **测试恢复**: 导出后建议测试导入功能确保数据完整

## 🔧 故障排除

### 解密失败
- 检查密码是否正确
- 确认文件未损坏
- 验证文件格式是否正确

### 浏览器不支持
- 更新到最新版本浏览器
- 使用支持 Web Crypto API 的浏览器
- 检查是否在 HTTPS 环境下使用

### 文件损坏
- 重新下载原始文件
- 检查文件传输过程是否完整
- 验证文件大小是否正确

## 📞 技术支持

如果您在使用加密功能时遇到问题，请：
1. 检查浏览器控制台是否有错误信息
2. 确认浏览器版本和兼容性
3. 验证文件格式和完整性
4. 联系技术支持并提供详细的错误信息
